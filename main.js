"use strict";require("core-js/modules/es.error.cause.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.Timer=exports.Timeout=void 0;function _defineProperty(a,b,c){return b=_toPropertyKey(b),b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _toPropertyKey(a){var b=_toPrimitive(a,"string");return"symbol"==typeof b?b:b+""}function _toPrimitive(a,b){if("object"!=typeof a||null===a)return a;var c=a[Symbol.toPrimitive];if(c!==void 0){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}function _classPrivateFieldInitSpec(a,b,c){_checkPrivateRedeclaration(a,b),b.set(a,c)}function _checkPrivateRedeclaration(a,b){if(b.has(a))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(a,b,c){var d=_classExtractFieldDescriptor(a,b,"set");return _classApplyDescriptorSet(a,d,c),c}function _classApplyDescriptorSet(a,b,c){if(b.set)b.set.call(a,c);else{if(!b.writable)throw new TypeError("attempted to set read only private field");b.value=c}}function _classPrivateFieldGet(a,b){var c=_classExtractFieldDescriptor(a,b,"get");return _classApplyDescriptorGet(a,c)}function _classExtractFieldDescriptor(a,b,c){if(!b.has(a))throw new TypeError("attempted to "+c+" private field on non-instance");return b.get(a)}function _classApplyDescriptorGet(a,b){return b.get?b.get.call(a):b.value}var _timeout=new WeakMap;class Timeout{clear(){let a=!!(0<arguments.length&&arguments[0]!==void 0)&&arguments[0];_classPrivateFieldGet(this,_timeout)&&(clearTimeout(_classPrivateFieldGet(this,_timeout)),a&&a())}constructor(a,b){_classPrivateFieldInitSpec(this,_timeout,{writable:!0,value:void 0}),_classPrivateFieldSet(this,_timeout,setTimeout(a,b))}}exports.Timeout=Timeout;var _duration=new WeakMap,_startedCallback=new WeakMap,_successCallback=new WeakMap,_failureCallback=new WeakMap,_timeout2=new WeakMap,_promiseRes=new WeakMap,_promiseRej=new WeakMap;class Timer{start(){let a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};const{duration:b=_classPrivateFieldGet(this,_duration)}=a;return this.done=new Promise((a,c)=>{_classPrivateFieldSet(this,_promiseRes,a),_classPrivateFieldSet(this,_promiseRej,c),_classPrivateFieldSet(this,_timeout2,new Timeout(()=>{_classPrivateFieldGet(this,_promiseRes).call(this,_classPrivateFieldGet(this,_successCallback)&&_classPrivateFieldGet(this,_successCallback).call(this))},b))}),_classPrivateFieldGet(this,_startedCallback)&&_classPrivateFieldGet(this,_startedCallback).call(this),this}cancel(){_classPrivateFieldGet(this,_timeout2)&&_classPrivateFieldGet(this,_timeout2).clear(()=>{_classPrivateFieldGet(this,_promiseRej).call(this,_classPrivateFieldGet(this,_failureCallback)&&_classPrivateFieldGet(this,_failureCallback).call(this))})}set duration(a){_classPrivateFieldSet(this,_duration,a)}set startedCallback(a){_classPrivateFieldSet(this,_startedCallback,a)}set successCallback(a){_classPrivateFieldSet(this,_successCallback,a)}set failureCallback(a){_classPrivateFieldSet(this,_failureCallback,a)}constructor(a){_classPrivateFieldInitSpec(this,_duration,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_startedCallback,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_successCallback,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_failureCallback,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_timeout2,{writable:!0,value:!1}),_classPrivateFieldInitSpec(this,_promiseRes,{writable:!0,value:void 0}),_classPrivateFieldInitSpec(this,_promiseRej,{writable:!0,value:void 0}),_defineProperty(this,"done",void 0),Object.assign(this,a)}}exports.Timer=Timer;
